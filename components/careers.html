<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Careers - KRELYON</title>
    
    <link rel="icon" href="../images/logo-krelyon.png" type="image/png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;700&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
    
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../css/dropdown.css">

    <style>
        /* --- BASIC STYLES --- */
        html { scroll-behavior: smooth; }
        body { overflow-x: hidden; }

        /* --- Logo Image CSS --- */
        #main-header .logo {
            padding: 0 !important;
            height: auto !important;
            width: auto !important;
        }
        #main-header .logo img {
            width: 160px !important;
            height: 50px !important;
            min-width: 160px !important;
            min-height: 50px !important;
            object-fit: contain;
            display: block;
        }
        .logo {
            text-decoration: none;
            display: inline-block;
        }
        .logo img {
            width: 160px;
            height: 50px;
            display: block;
            object-fit: contain;
        }
        /* --- End Logo CSS --- */


        /* --- CAREERS HERO SECTION --- */
         .careers-hero {
            height: 90vh; /* Shorter than about page hero */
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 3rem;
            border-bottom: 1px solid var(--border-light);
            overflow: hidden;
        }
        .hero-image-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('../images/team.jpg'); /* Using team image */
            background-size: cover;
            background-position: center;
            z-index: 1;
            animation: ken-burns 20s ease-in-out infinite alternate;
        }
        @keyframes ken-burns {
            0% { transform: scale(1.1) rotate(1deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        .hero-image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(17, 24, 39, 0.7); 
            z-index: 2;
        }
        .careers-hero-content {
            position: relative;
            z-index: 3;
            max-width: 900px;
            opacity: 0; 
            transform: translateY(30px);
        }
        .careers-hero h1 {
            font-size: 4.5vw;
            line-height: 1.1;
            color: var(--text-color);
        }
        .careers-hero p {
            font-size: 1.2rem;
            color: var(--text-muted);
            max-width: 650px;
            margin: 1.5rem auto 0 auto;
            line-height: 1.7;
        }
        
        /* --- Section Header --- */
        .section-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            max-width: 700px;
            margin: 0 auto 5rem auto;
        }
        .section-header h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
         }
        .section-subtitle {
            font-size: 1.1rem;
            color: var(--text-muted);
            line-height: 1.7;
         }
         
        /* --- CAREERS LIST SECTION --- */
        .careers-list {
            padding: 6rem 3rem;
            max-width: 900px;
            margin: 0 auto; /* Center the list */
        }
        
        .job-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 2rem 2.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            opacity: 0; /* For animation */
            transform: translateY(30px); /* For animation */
            transition: all 0.3s ease;
        }
        .job-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
        }
        
        .job-info h3 {
            font-size: 1.5rem;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }
        .job-info p {
            font-size: 1rem;
            color: var(--text-muted);
        }
        
        .btn-apply {
            display: inline-block; 
            background-color: var(--accent-color); 
            color: var(--bg-color); 
            padding: 0.8rem 1.8rem; 
            text-decoration: none;
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700; 
            border-radius: 5px; 
            border: 2px solid var(--accent-color);
            transition: all 0.3s ease;
        }
        .btn-apply:hover {
            background-color: transparent;
            color: var(--accent-color);
        }
        
        .no-openings {
            text-align: center;
            font-size: 1.2rem;
            color: var(--text-muted);
            padding: 4rem 0;
            border: 1px dashed var(--border-light);
            border-radius: 12px;
        }

        /* --- FOOTER (Copied from about.html) --- */
        footer {
            background-color: var(--bg-secondary);
            color: var(--text-muted);
            padding: 5rem 3rem 0 3rem;
            border-top: 1px solid var(--border-light);
        }
        .footer-primary {
            display: grid;
            grid-template-columns: 1.5fr 2fr; 
            gap: 3rem;
            padding-bottom: 5rem;
            align-items: start;
        }
        .footer-logo-area .logo {
            display: block;
            margin-bottom: 1rem;
        }
        .footer-logo-area p {
            max-width: 300px;
            line-height: 1.7;
            font-size: 0.95rem;
        }
        .footer-cta-area {
             margin-top: 2rem;
        }
        .footer-cta-area .footer-email {
            display: block;
            color: var(--text-color);
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        .footer-cta-area .footer-email:hover {
            color: var(--accent-color);
        }
        .footer-links-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            text-align: center;
        }
        .footer-column h5 {
            font-size: 1.1rem;
            color: var(--text-color);
            margin-bottom: 1.5rem;
            font-family: 'Sora', sans-serif;
            font-weight: 500;
            opacity: 0.8;
        }
        .footer-column ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .footer-column ul li {
            margin-bottom: 0.75rem;
        }
        .footer-column ul li a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.95rem;
            transition: color 0.3s ease;
        }
        .footer-column ul li a:hover {
            color: var(--accent-color);
        }
        .footer-secondary {
            display: flex;
            flex-direction: column; 
            align-items: center; 
            gap: 1.25rem; 
            padding: 12rem 0;
            border-top: 1px solid var(--border-light);
            font-size: 0.9rem;
        }
        .footer-socials {
            display: flex;
            align-items: center;
            gap: 1.25rem;
        }
        .footer-socials a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .footer-socials a:hover {
            color: var(--text-color);
        }
        .footer-socials a svg {
            width: 22px;
            height: 22px;
            fill: currentColor;
        }
        .footer-copyright {
            margin: 0;
        }

        /* --- RESPONSIVE STYLES --- */
         @media (max-width: 1024px) {
            .careers-hero h1 { font-size: 7vw; }
            .footer-primary {
                grid-template-columns: 1fr 1fr;
            }
            .footer-links-grid {
                 grid-template-columns: 1fr 1fr; 
                 text-align: left;
            }
        }
        
        @media (max-width: 768px) {
            .careers-hero h1 { font-size: 10vw; }
            .careers-list { padding: 4rem 1.5rem; }
            .job-card {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5rem;
            }
            .footer-primary {
                grid-template-columns: 1fr;
                gap: 2.5rem;
            }
            .footer-links-grid {
                 margin-top: 1rem;
                 text-align: left;
            }
            .footer-secondary {
                align-items: center; 
                gap: 1.5rem;
            }
        }
        
        @media (max-width: 600px) {
            .careers-hero h1 { font-size: 12vw; }
            .footer-links-grid { 
                grid-template-columns: 1fr;
                gap: 1rem;
            } 
        }

    </style>
</head>
<body>
    <div id="preloader-bg"></div>
    <div id="preloader-circle"></div>
    
    <header id="main-header">
        <a href="home.html" class="logo">
            <img src="../images/logo-krelyon.png" alt="Krelyon Home">
        </a> 
        <nav class="desktop-nav">
            <a href="home.html">Home</a> 
            <div class="nav-item-dropdown">
                <button class="nav-dropdown-toggle" id="services-toggle">
                    Services 
                    <svg class="nav-arrow" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
                <div class="mega-menu-dropdown" id="services-menu">
                    <div class="mega-menu-grid">
                        <a href="service.html#section-mobile" class="mega-menu-item">
                            <div class="mega-menu-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.73 18.23c-.26-1.57-1.03-3.03-2.1-4.23-1.08-1.2-2.45-2.14-3.95-2.63-.3-.1-.5-.26-.5-.42v-2.02c0-.16-.12-.3-.28-.32-1.63-.2-3.2-.2-4.84 0-.16.02-.28.16-.28.32v2.02c0 .16-.2.32-.5.42-1.5.5-2.87 1.43-3.95 2.63-1.07 1.2-1.84 2.66-2.1 4.23-.05.3-.05.6 0 .9.26 1.57 1.03 3.03 2.1 4.23 1.08 1.2 2.45 2.14 3.95 2.63.3.1.5.26-.5.42v2.02c0 .16.12-.3.28-.32 1.63.2 3.2.2 4.84 0 .16-.02.28-.16-.28-.32v-2.02c0-.16.2.32.5.42 1.5.5 2.87 1.43 3.95 2.63 1.07 1.2 1.84 2.66 2.1 4.23.05.3-.05.6 0 .9z"></path><circle cx="12" cy="12" r="4"></circle></svg>
                            </div>
                            <div class="mega-menu-content">
                                <h4>Mobile App Development</h4>
                                <p>High-performance, scalable mobile apps for iOS and Android.</p>
                            </div>
                        </a>
                        <a href="service.html#section-webdesign" class="mega-menu-item">
                             <div class="mega-menu-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                            </div>
                            <div class="mega-menu-content">
                                <h4>Web Development</h4>
                                <p>Complex enterprise platforms and custom web solutions.</p>
                            </div>
                        </a>
                        <a href="service.html#section-ecommerce" class="mega-menu-item">
                             <div class="mega-menu-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>
                            </div>
                            <div class="mega-menu-content">
                                <h4>E-Commerce Sites</h4>
                                <p>Bespoke e-commerce solutions that drive growth and sales.</p>
                            </div>
                        </a>
                        <a href="#" class="mega-menu-item">
                             <div class="mega-menu-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 1l22 22M8 1v5h5M16 1v5h-5M8 23v-5h5M16 23v-5h-5M1 8h5v5M1 16h5v-5M23 8h-5v5M23 16h-5v-5"/></svg>
                            </div>
                            <div class="mega-menu-content">
                                <h4>AI & ML Solutions</h4>
                                <p>Integrate intelligent models to automate and optimize processes.</p>
                            </div>
                        </a>
                        <a href="#" class="mega-menu-item">
                             <div class="mega-menu-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>
                            </div>
                            <div class="mega-menu-content">
                                <h4>UI/UX & Branding</h4>
                                <p>User-centric designs that elevate your brand experience.</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="nav-item-dropdown">
                <button class="nav-dropdown-toggle" id="about-toggle">
                    About
                    <svg class="nav-arrow" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
                <div class="simple-dropdown-menu" id="about-menu">
                    <a href="about.html">Our Company</a>
                    <a href="about.html#team">Our Team</a>
                    <a href="careers.html">Careers</a> </div>
            </div>
            <a href="service.html">Work</a>
            <a href="products.html">Insights</a>
            <a href="products.html">Products</a> 
        </nav>
        <a href="contact.html" class="cta-button">START A PROJECT</a> 
        <button class="mobile-nav-toggle" aria-label="Toggle navigation">
            <span class="line line1"></span>
            <span class="line line2"></span>
            <span class="line line3"></span>
        </button>
    </header>

    <div id="mobile-nav">
        </div>


    <main id="main-content">

        <section class="careers-hero">
            <div class="hero-image-bg"></div>
            <div class="hero-image-overlay"></div>
            <div class="careers-hero-content">
                <h1>Join Our Team</h1>
                <p>We are building the future of digital experience. Weâ€™re looking for talented people to join us on our mission.</p>
            </div>
        </section>

        <section class="careers-list">
            <div class="section-header">
                <h2>Open Positions</h2>
                <p class="section-subtitle">Find your next opportunity and build something amazing with us.</p>
            </div>
            
            <div class="job-openings-container">
                
                <div class="job-card">
                    <div class="job-info">
                        <h3>Senior Frontend Developer</h3>
                        <p>Remote (Global) / Full-Time</p>
                    </div>
                    <a href="job-frontend-developer.html" class="btn-apply">Apply Now</a>
                </div>
                
                <div class="job-card">
                    <div class="job-info">
                        <h3>UI/UX Designer</h3>
                        <p>Dhaka, Bangladesh / Full-Time</p>
                    </div>
                    <a href="#" class="btn-apply">Apply Now</a>
                </div>

                <div class="job-card">
                    <div class="job-info">
                        <h3>Project Manager (Fintech)</h3>
                        <p>Remote (Global) / Contract</p>
                    </div>
                    <a href="#" class="btn-apply">Apply Now</a>
                </div>

                </div>
        </section>

    </main>
    
    <footer>
        <div class="footer-primary">
            <div class="footer-logo-area">
                <a href="home.html" class="logo">
                    <img src="../images/logo-krelyon.png" alt="Krelyon Home">
                </a>
                <p>A creative partner for digital innovators. We solve complex problems with human-centric design.</p>
                <div class="footer-cta-area">
                     <a href="mailto:info@krelyon.com" class="footer-email">info@krelyon.com</a>
                </div>
            </div>
            <div class="footer-links-grid">
                <div class="footer-column">
                    <h5>Services</h5>
                    <ul>
                        <li><a href="service.html#section-mobile">Mobile Apps</a></li>
                        <li><a href="service.html#section-webdesign">Web Development</a></li>
                        <li><a href="service.html#section-ecommerce">E-Commerce</a></li>
                        <li><a href="#">AI & ML Solutions</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h5>Company</h5>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="service.html">Work</a></li>
                        <li><a href="careers.html">Careers</a></li>
                        <li><a href="products.html">Insights</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-secondary">
            <div class="footer-socials">
                <a href="#" target="_blank" aria-label="LinkedIn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                </a>
                <a href="#" target="_blank" aria-label="Facebook">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-3 7h-1.924c-.615 0-1.076.252-1.076.889v1.111h3l-.238 3h-2.762v8h-3v-8h-2v-3h2v-1.923c0-2.022 1.064-3.077 3.438-3.077h2.562v3z"/></svg>
                </a>
                <a href="#" target="_blank" aria-label="Instagram">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.057 1.644-.069 4.85-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.059 1.689.073 4.948.073s3.667-.014 4.947-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.947s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                </a>
                <a href="#" target="_blank" aria-label="Dribbble">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2.822 18.44c-3.34-1.121-5.69-4.439-5.69-8.179 0-.621.071-1.226.206-1.809l11.066 11.066c-.699.16-1.423.255-2.176.255-1.13 0-2.197-.246-3.167-.668zm.89-1.61c1.232.714 2.651 1.141 4.157 1.141 4.213 0 7.73-3.003 8.356-6.953l-11.365 11.365c-.073-.623-.148-1.253-.148-1.895 0-1.23.273-2.388.755-3.435.033-.075.066-.149.1-.223zm6.61-9.229c-1.222-.709-2.62-1.129-4.111-1.129-4.212 0-7.729 3.003-8.355 6.952l11.364-11.364c.073.623.148 1.254.148 1.895 0 1.23-.273 2.388-.754 3.435-.033.075-.066.149-.1.223zm-5.46-3.832c.699-.16 1.423-.255 2.176-.255 1.13 0 2.197.246 3.167.668 3.34 1.121 5.69 4.439 5.69 8.179 0 .621-.071 1.226-.206 1.809l-11.066-11.066z"/></svg>
                </a>
            </div>
            <p class="footer-copyright">&copy; 2025 Krelyon. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        
        /* --- JAVASCRIPT --- */
        
        function runScrollAnimations() {
            // Animate job cards
             gsap.to('.job-card', {
                opacity: 1, y: 0, stagger: 0.15,
                scrollTrigger: {
                    trigger: '.job-openings-container',
                    start: 'top 80%',
                    toggleActions: 'play none none none'
                }
            });
        }

        function runPageAnimations() {
            if (typeof gsap === 'undefined') {
                console.error("GSAP failed to load. Skipping animations.");
                document.getElementById('main-content').style.visibility = 'visible';
                document.getElementById('main-header').style.opacity = '1';
                document.querySelector('.careers-hero-content').style.opacity = '1';
                return;
            }

             gsap.registerPlugin(ScrollTrigger); // No TextPlugin needed here

             const tl = gsap.timeline();
            tl.to(document.getElementById('preloader-circle'), { scale: 1, duration: 0.5, ease: 'power2.out' })
              .to(document.getElementById('preloader-circle'), { scale: 50, duration: 1.5, ease: 'power3.inOut' })
              .to(document.getElementById('preloader-bg'), { opacity: 0, duration: 1, onComplete: () => document.getElementById('preloader-bg').style.display = 'none' }, "-=1.5")
              .to(document.getElementById('preloader-circle'), { opacity: 0, duration: 1, onComplete: () => {
                  document.getElementById('preloader-circle').style.display = 'none';
                  document.getElementById('main-content').style.visibility = 'visible';
              }}, "-=1")
              .to(document.getElementById('main-header'), { opacity: 1, duration: 1 }, "-=0.5")
              .to('.careers-hero-content', { opacity: 1, y: 0, duration: 1, ease: 'power3.out' }, "-=0.5");
              
             ScrollTrigger.create({
                start: 'top -80',
                end: 99999,
                toggleClass: {
                    className: 'scrolled-nav',
                    targets: '#main-header'
                }
            });
            
            runScrollAnimations(); // Run the animations for the job cards
        } 
        
        
        /* --- NAVIGATION FUNCTIONS (Copied from about.html) --- */
      
        let megaMenuTL; 
        function initializeMegaMenu() {
            if (typeof gsap === 'undefined') return;
            const toggle = document.getElementById('services-toggle');
            const menu = document.getElementById('services-menu');
            if (!toggle || !menu) return;
            const menuItems = gsap.utils.toArray(".mega-menu-item");
            
            megaMenuTL = gsap.timeline({ paused: true });
            megaMenuTL.to(menu, { opacity: 1, transform: 'translateX(-50%) translateY(0)', duration: 0.3, ease: 'power2.out' })
                      .to(menuItems, { opacity: 1, y: 0, stagger: 0.04, duration: 0.3, ease: 'power2.out' }, "-=0.2");

            toggle.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('about-menu')?.classList.remove('open');
                document.getElementById('about-toggle')?.classList.remove('active');
                
                toggle.classList.toggle('active');
                menu.classList.toggle('open');
                if (menu.classList.contains('open')) megaMenuTL.play();
                else {
                    gsap.to(menuItems, {opacity: 0, y: 15, duration: 0.01});
                    megaMenuTL.reverse();
                }
            });
             document.addEventListener('click', (e) => {
                if (menu.classList.contains('open') && !menu.contains(e.target) && !toggle.contains(e.target)) {
                    toggle.classList.remove('active');
                    menu.classList.remove('open');
                    gsap.to(menuItems, {opacity: 0, y: 15, duration: 0.01});
                    megaMenuTL.reverse();
                }
            });
        }

         function initializeAboutDropdown() {
            const toggle = document.getElementById('about-toggle');
            const menu = document.getElementById('about-menu');
            if (!toggle || !menu) return;

            toggle.addEventListener('click', (e) => {
                e.preventDefault();
                if (megaMenuTL && document.getElementById('services-menu')?.classList.contains('open')) {
                    document.getElementById('services-menu').classList.remove('open');
                    document.getElementById('services-toggle').classList.remove('active');
                    gsap.to(".mega-menu-item", {opacity: 0, y: 15, duration: 0.01});
                    megaMenuTL.reverse();
                }
                const isOpen = menu.classList.toggle('open');
                toggle.classList.toggle('active', isOpen);
            });
             document.addEventListener('click', (e) => {
                if (menu.classList.contains('open') && !menu.contains(e.target) && !toggle.contains(e.target)) {
                    menu.classList.remove('open');
                    toggle.classList.remove('active');
                }
            });
        }

         function initializeMobileMenu() {
            const mobileToggle = document.querySelector('.mobile-nav-toggle');
            const mobileNav = document.getElementById('mobile-nav');
            const mobileNavClose = document.getElementById('mobile-nav-close');
            
            function openMenu() {
                document.body.classList.add('nav-open-no-scroll'); 
                mobileNav.classList.add('open');
            }
            function closeMenu() {
                document.body.classList.remove('nav-open-no-scroll'); 
                mobileNav.classList.remove('open');
                document.querySelectorAll('.mobile-nav-item-with-sub.active').forEach(item => {
                    item.classList.remove('active');
                    item.querySelector('.mobile-sub-menu').style.maxHeight = '0';
                });
            }
            
            if (mobileToggle && mobileNav && mobileNavClose) {
                mobileToggle.addEventListener('click', () => {
                    if (document.body.classList.contains('nav-open-no-scroll')) closeMenu();
                    else openMenu();
                });
                mobileNavClose.addEventListener('click', closeMenu);
            }

            const allSubToggles = document.querySelectorAll('.mobile-nav-sub-toggle');
            allSubToggles.forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const parent = toggle.parentElement;
                    const subMenu = parent.querySelector('.mobile-sub-menu');
                    const isActive = parent.classList.contains('active');

                    document.querySelectorAll('.mobile-nav-item-with-sub.active').forEach(activeParent => {
                        if (activeParent !== parent) {
                            activeParent.classList.remove('active');
                            activeParent.querySelector('.mobile-sub-menu').style.maxHeight = '0';
                        }
                    });

                    if (!isActive) {
                        parent.classList.add('active');
                        subMenu.style.maxHeight = subMenu.scrollHeight + 'px';
                    } else {
                        parent.classList.remove('active');
                        subMenu.style.maxHeight = '0';
                    }
                });
            });
        }
        
         function initializeAllNavigation() {
            initializeMegaMenu();
            initializeAboutDropdown();
            initializeMobileMenu();
            
            /* This code for smooth scrolling to sections (like #team)
               is not needed on this page, but it doesn't hurt to keep it.
            */
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        if (document.body.classList.contains('nav-open-no-scroll')) {
                            document.getElementById('mobile-nav-close').click();
                        }
                        
                        const headerOffset = 100;  
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                        window.scrollTo({
                             top: offsetPosition,
                             behavior: "smooth"
                        });
                    }
                });
            });
        }


         window.addEventListener('load', () => {
            runPageAnimations();
            initializeAllNavigation();
        });
        
    </script>

</body>
</html>